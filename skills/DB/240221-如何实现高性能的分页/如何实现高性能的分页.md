
数据库分页查询一般都是使用 offset 和 limit

```sql
select * from t1 limit 10 offset 100
```

 

这种广泛使用的分页方式，在数据量不大的场景下还是可以应付的

 

offset 和 limit 这种方式，如果超出了服务器内存能够存储的能力，问题就会出现

因为这种分页方式是每次都会进行低效的**全表扫描**，就是逐行扫描，顺序读取每一行，这样磁盘 IO 的开销会很大



举个例子

在 dev 环境的测试数据库中，mcp_user_info 表里一共有 24万 多行数据





我们来看下 offset 这种方式的查询时间

使用 offset 和 limit 进行多次查询





**如何实现高性能分页？**

所谓高性能的分页查询，是使用了给予指针的分页

通常我们的表中都有主键，我们可以显式的告知数据库最新行

```sql
select * from t1 where id > 99 limit 10
```



然后看看使用高性能的分页查询的查询时间

 

当然，这种方式也有其弊端

这种方式需要有至少一个唯一的字段，比如唯一的整数 ID 或时间戳，不过有时候像多对多关系的表，是没有主键的，这样在使用传统的 offset 和 limit 方式时就会存在潜在的慢查询问题